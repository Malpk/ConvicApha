using System.Collections;
using System.Collections.Generic;
using UnityEngine;

namespace PlayerComponent
{

    public class PlayerInvulnerability : MonoBehaviour
    {
        [Min(1)]
        [SerializeField] private float _timeActive = 1f;

        private float _progress = 0f;

        private System.Action Complite;

        public bool IsInvulnerability { get; private set; }

        private void Start()
        {
            enabled = false;
        }

        private void Update()
        {
            _progress += Time.deltaTime / _timeActive;
            if (_progress >= 1f)
            {
                Deactivate();
                enabled = false;
            }
        }

        public void Activate()
        {
            IsInvulnerability = true;
            enabled = true;
        }
        public void ActivateForWhite(System.Action callOnComplite)
        {
            Complite = callOnComplite;
            _progress = 0f;
            Activate();
        }

        public void Deactivate()
        {
            IsInvulnerability = false;
            Complite?.Invoke();
        }
    }
}